<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Make stacked bar chart (possibly split into separate bars and facetted) in the OME style. (Dave's version.) — initial_bar • OMESurvey</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Make stacked bar chart (possibly split into separate bars and facetted) in the OME style. (Dave's version.) — initial_bar"><meta name="description" content="initial_bar builds a (stacked, filled) proportional bar chart from a
tidy data frame of survey responses. The first column is treated as the
response factor (fill), the optional second column as the grouping/subdivision,
and the optional third column is used for faceting."><meta property="og:description" content="initial_bar builds a (stacked, filled) proportional bar chart from a
tidy data frame of survey responses. The first column is treated as the
response factor (fill), the optional second column as the grouping/subdivision,
and the optional third column is used for faceting."><meta property="og:image" content="https://jake-powell.github.io/OMESurvey/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">OMESurvey</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Create-OME-branded-excel-output.html">Create OME branded excel output</a></li>
    <li><a class="dropdown-item" href="../articles/Create-survey-figures.html">Create survey figures</a></li>
    <li><a class="dropdown-item" href="../articles/help.html">help</a></li>
    <li><a class="dropdown-item" href="../articles/Preparation-and-initial-survey-analysis.html">Preparation and initial survey analysis</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Make stacked bar chart (possibly split into separate bars and facetted) in the OME style. (Dave's version.)</h1>

      <div class="d-none name"><code>initial_bar.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>initial_bar</code> builds a (stacked, filled) proportional bar chart from a
tidy data frame of survey responses. The first column is treated as the
response factor (fill), the optional second column as the grouping/subdivision,
and the optional third column is used for faceting.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">initial_bar</span><span class="op">(</span></span>
<span>  <span class="va">dat</span>,</span>
<span>  percCut <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  colo <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  horiz <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  text_scale <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  fillLabText <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xLabText <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  yLabText <span class="op">=</span> <span class="st">"Proportion of responses"</span>,</span>
<span>  titleText <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  facet_labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  facet_layout <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dat">dat<a class="anchor" aria-label="anchor" href="#arg-dat"></a></dt>
<dd><p>A data frame with 1–3 variables:</p><ul><li><p><strong>1 variable</strong> → a single proportional bar.</p></li>
<li><p><strong>2 variables</strong> → separate bars for each level of the second variable.</p></li>
<li><p><strong>3 variables</strong> → facetted bars by the third variable.
All variables should be factors (characters may work but are not guaranteed).</p></li>
</ul></dd>


<dt id="arg-perccut">percCut<a class="anchor" aria-label="anchor" href="#arg-perccut"></a></dt>
<dd><p>numeric scalar (0-100). Cutoff below which percentages are not shown in bar segments. Default <code>5</code>.</p></dd>


<dt id="arg-colo">colo<a class="anchor" aria-label="anchor" href="#arg-colo"></a></dt>
<dd><p>(optional but recommended) vector of colours to use for the fill scale (character vector of colours,
length the same as the number of levels of the factor that is the first variable of <code>dat</code>.)
If <code>NULL</code> (default) the pallete from <code>OMESurvey::get_OME_colours(type='distinct')</code> is used.
When <code>na.rm = FALSE</code> a grey colour is prepended for the "No response" level.
Note that percentage labels are in white, so the pallete needs to work with that.
(... or this function needs upgrading!)</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>logical. If <code>TRUE</code> then remove <code>NA</code> responses from the data;
if <code>FALSE</code> (default) then they are converted to "(No response)" and treated as an additional allowed response.</p></dd>


<dt id="arg-horiz">horiz<a class="anchor" aria-label="anchor" href="#arg-horiz"></a></dt>
<dd><p>logical (default FALSE) determining whether to coord_flip() so that bars are horizontal and place legend below the plot.</p></dd>


<dt id="arg-text-scale">text_scale<a class="anchor" aria-label="anchor" href="#arg-text-scale"></a></dt>
<dd><p>positive number (default 1) for scaling the size of the percentage and #response labels.</p></dd>


<dt id="arg-filllabtext">fillLabText<a class="anchor" aria-label="anchor" href="#arg-filllabtext"></a></dt>
<dd><p>Optional character. Label for the fill/legend.
If <code>NULL</code> (the default) the legend title is removed (no label).
If <code>""</code> the name of the first variable in <code>dat</code> is used.</p></dd>


<dt id="arg-xlabtext">xLabText<a class="anchor" aria-label="anchor" href="#arg-xlabtext"></a></dt>
<dd><p>optional text for labelling the second-variable-in-<code>dat</code> axis.
If <code>NULL</code> (the default) the label is removed (no label).
If <code>""</code> the name of the first variable in <code>dat</code> is used.</p></dd>


<dt id="arg-ylabtext">yLabText<a class="anchor" aria-label="anchor" href="#arg-ylabtext"></a></dt>
<dd><p>optional text for labelling the 'proportion' axis. Default <code>"Proportion of responses"</code>.</p></dd>


<dt id="arg-titletext">titleText<a class="anchor" aria-label="anchor" href="#arg-titletext"></a></dt>
<dd><p>optional text for plot title. With default <code>NULL</code> the title is removed.</p></dd>


<dt id="arg-facet-labels">facet_labels<a class="anchor" aria-label="anchor" href="#arg-facet-labels"></a></dt>
<dd><p>Optional named character vector used as a labeller for
facets (names are original facet values, values are labels to display).
Default <code>NULL</code> uses the values of that variable.</p></dd>


<dt id="arg-facet-layout">facet_layout<a class="anchor" aria-label="anchor" href="#arg-facet-layout"></a></dt>
<dd><p>Optional character. If <code>"1row"</code> the facets are
arranged in a single row; otherwise default facet layout is used.
(<code>"1col"</code> option planned but not yet supported.)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>ggplot</code> object (or a <code>cowplot</code> object if <code>cowplot</code> is installed)</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The plot displays:</p><ul><li><p>relative frequencies of the first variable,</p></li>
<li><p>optional subdivision into separate bars,</p></li>
<li><p>optional faceting,</p></li>
<li><p>percentage labels inside bar segments (above a cutoff),</p></li>
<li><p><code>(n)</code> labels showing the number of responses per bar.</p></li>
</ul><p>The function returns a <code>ggplot</code> (or <code>cowplot</code> if it is installed) object ready for further customization or direct printing.</p>
<p>Percentages are displayed in segments that comprise at least <code>percCut</code> of their bar;
the percentage displayed is this rounded to a whole number.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Minimal example with two questions and three response levels</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  Response <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Yes"</span>, <span class="st">"No"</span>, <span class="st">"Yes"</span>, <span class="st">"Maybe"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  Group    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"B"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">initial_bar</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="initial_bar-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Horizontal version with a title</span></span></span>
<span class="r-in"><span><span class="fu">initial_bar</span><span class="op">(</span><span class="va">dat</span>, horiz <span class="op">=</span> <span class="cn">TRUE</span>, titleText <span class="op">=</span> <span class="st">"Example bar chart"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="initial_bar-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jake Powell.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

